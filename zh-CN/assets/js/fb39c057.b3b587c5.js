"use strict";(self.webpackChunkoj_lab_docusaurus=self.webpackChunkoj_lab_docusaurus||[]).push([[8806],{25:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});var o=t(4848),s=t(8453);const i={},a="Making View",r={id:"development/frontend/making-view",title:"Making View",description:"This document will guide you through the process of creating a new view in",source:"@site/docs/development/frontend/making-view.md",sourceDirName:"development/frontend",slug:"/development/frontend/making-view",permalink:"/oj-lab-docusaurus/zh-CN/docs/development/frontend/making-view",draft:!1,unlisted:!1,editUrl:"https://github.com/OJ-lab/oj-lab-docusaurus/tree/main/docs/development/frontend/making-view.md",tags:[],version:"current",frontMatter:{},sidebar:"developmentSidebar",previous:{title:"Frontend",permalink:"/oj-lab-docusaurus/zh-CN/docs/category/frontend"}},c={},d=[{value:"Main Directories",id:"main-directories",level:2},{value:"Layouts",id:"layouts",level:3},{value:"Pages",id:"pages",level:3},{value:"Components",id:"components",level:3},{value:"Tools",id:"tools",level:2},{value:"Tailwind CSS",id:"tailwind-css",level:3},{value:"Best Practices",id:"best-practices",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"making-view",children:"Making View"}),"\n",(0,o.jsxs)(n.p,{children:["This document will guide you through the process of creating a new view in\n",(0,o.jsx)(n.a,{href:"https://github.com/oj-lab/oj-lab-front",children:"OJ Lab front"}),"\n."]}),"\n",(0,o.jsxs)(n.p,{children:["You will get to know with three main directories:\n",(0,o.jsx)(n.code,{children:"/layouts"}),", ",(0,o.jsx)(n.code,{children:"/pages"})," and ",(0,o.jsx)(n.code,{children:"/components"}),".\nSo that you can understand how the view is structured and what kind of codes you need to provide in each directory."]}),"\n",(0,o.jsxs)(n.admonition,{type:"tip",children:[(0,o.jsxs)(n.p,{children:["We will discuss the usage of\n",(0,o.jsx)(n.a,{href:"https://reactjs.org/docs/hooks-intro.html",children:"React Hooks"})," and state management\nin some parts of the document."]}),(0,o.jsx)(n.p,{children:"If you are not familiar with React Hooks, you can check the official documentation."})]}),"\n",(0,o.jsx)(n.h2,{id:"main-directories",children:"Main Directories"}),"\n",(0,o.jsx)(n.h3,{id:"layouts",children:"Layouts"}),"\n",(0,o.jsxs)(n.p,{children:["Layout is a fundamental part of the view,\nit usually provides ",(0,o.jsx)(n.code,{children:"header"}),", ",(0,o.jsx)(n.code,{children:"footer"}),", ",(0,o.jsx)(n.code,{children:"sidebar"}),", ",(0,o.jsx)(n.code,{children:"nav"})," and other common components.\nIn another word, layout is something it usually doesn't change between different pages."]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"/layouts"})," directory contains the layout components.\nCurrently, OJ Lab front has only one layout,\nso all the components are placed in the root of the directory\n(If we have more layouts in the future, we will create subdirectories for each layout)."]}),"\n",(0,o.jsxs)(n.p,{children:["In OJ Lab front's ",(0,o.jsx)(n.code,{children:"Router.tsx"}),",\nthe layout component wraps other pages through React Router's ",(0,o.jsx)(n.a,{href:"https://reactrouter.com/en/main/components/outlet",children:"Outlet"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'// In Layout.tsx\n<div>\n    {!props.children && <Outlet />}\n</div>\n\n// In Router.tsx\n<Route path="/" element={<Layout />}>\n    <Route path="" element={<Navigate replace to="/problems" />} />\n    {/* Other routes */}\n</Route>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"pages",children:"Pages"}),"\n",(0,o.jsx)(n.p,{children:"Pages compose the main content of the view by combining different components and hooking in necessary states."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'const Judge: React.FC = () => {\n  const uid = useParams().uid as string;\n  const { getJudge } = useJudge(uid);\n\n  const judge = getJudge();\n\n  return (\n    judge && (\n      <div className="grid gap-4 overflow-x-auto">\n        <div className="h-fit rounded border border-base-content/10 bg-base-100">\n          <JudgeTable data={[judge]} />\n        </div>\n        <MarkdownRender content={getCodeBlock(judge.language, judge.code)} />\n      </div>\n    )\n  );\n};\n'})}),"\n",(0,o.jsxs)(n.p,{children:["In this example, we get the judge data by using the ",(0,o.jsx)(n.code,{children:"useJudge"})," hook.\nThe judge data is got by calling backend's API\nand then passed to the ",(0,o.jsx)(n.code,{children:"JudgeTable"})," and ",(0,o.jsx)(n.code,{children:"MarkdownRender"})," components.\nWhen the judge data is ready, the page will render the components."]}),"\n",(0,o.jsx)(n.h3,{id:"components",children:"Components"}),"\n",(0,o.jsx)(n.p,{children:"Components are reusable pieces of code that can be used in different pages."}),"\n",(0,o.jsxs)(n.admonition,{type:"warning",children:[(0,o.jsx)(n.p,{children:"There are some special circumstances where you need to use state in components.\nFor example, the monaco editor component needs to change it's theme and size according to window settings."}),(0,o.jsx)(n.p,{children:"But usually, components should be stateless."})]}),"\n",(0,o.jsxs)(n.p,{children:["In OJ Lab front, components are classified into ",(0,o.jsx)(n.code,{children:"control"}),",\n",(0,o.jsx)(n.code,{children:"display"}),", ",(0,o.jsx)(n.code,{children:"input"}),", ",(0,o.jsx)(n.code,{children:"navigation"})," four categories."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"control"})," components are used to control the view, such as buttons, dropdowns, etc."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"display"})," components are used to display data, such as tables, cards, etc."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"input"})," components are used to get user input, such as forms, inputs, etc."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"navigation"})," components are used to navigate between pages, such as breadcrumbs, menus, etc."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"export interface UserMenuAction {\n  name: string;\n  href?: string;\n  onClick?: () => void;\n}\n\nexport interface UserMenuProps {\n  avatarUrl?: string;\n  actions?: Array<UserMenuAction>;\n}\n\n/**\n * @param {string} props.avatarUrl\n * @param {Array<{ name: string, href: string }>} props.navigation The name of navigation will be translated.\n */\nconst UserMenu: React.FC<UserMenuProps> = (props) => {\n"})}),"\n",(0,o.jsx)(n.p,{children:"When working on a new view, you should first check if there are any existing components that can be reused.\nThen, if a new component is needed, you should design the props to pass into the component."}),"\n",(0,o.jsx)(n.h2,{id:"tools",children:"Tools"}),"\n",(0,o.jsx)(n.h3,{id:"tailwind-css",children:"Tailwind CSS"}),"\n",(0,o.jsxs)(n.p,{children:["OJ Lab front uses ",(0,o.jsx)(n.a,{href:"https://tailwindcss.com/",children:"Tailwind CSS"})," as the main CSS framework.\nYou can control the style of each component in a regular way by simply adding inline Tailwind CSS classes.\nWith VSCode's ",(0,o.jsx)(n.a,{href:"https://marketplace.visualstudio.com/items?itemName=bradlc.vscode-tailwindcss",children:"Tailwind CSS IntelliSense"})," extension,\nwriting Tailwind CSS classes becomes much easier."]}),"\n",(0,o.jsxs)(n.p,{children:["You may also need to use ",(0,o.jsx)(n.code,{children:"joinClass"})," utility function to dynamically add classes to a component."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'<div\n    className={joinClasses(\n        "dropdown dropdown-end",\n        open && "dropdown-open",\n    )}\n    onClick={() => {\n        setOpen(!open);\n    }}\n>\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["There are also many other useful utility functions\nwhich can be used in different parts of the project\nin the ",(0,o.jsx)(n.code,{children:"utils"})," directory."]})}),"\n",(0,o.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsx)(n.p,{children:"You should avoid using too many inline logic in the TSX code.\nInstead, you should extract the logic into hooks or functions."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'const ProblemActions: React.FC<ActionsProps> = (props) => {\n  const onClickDelete = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    props.onClickDelete();\n    const modal = document.getElementById(\n      "delete_confirm_modal",\n    ) as HTMLDialogElement;\n    modal?.showModal();\n  };\n\n  return (\n    <div className="flex space-x-1">\n      <button className="btn btn-square btn-ghost btn-sm rounded hover:bg-primary/20">\n        <PencilIcon className="h-5 w-5 text-primary" />\n      </button>\n      <button\n        className="btn btn-square btn-ghost btn-sm rounded hover:bg-error/20"\n        onClick={onClickDelete}\n      >\n        <TrashIcon className="h-5 w-5 text-error" />\n      </button>\n    </div>\n  );\n};\n'})}),"\n",(0,o.jsxs)(n.p,{children:["In this example, the ",(0,o.jsx)(n.code,{children:"onClickDelete"})," function is extracted from the ",(0,o.jsx)(n.code,{children:"onClick"})," event handler."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var o=t(6540);const s={},i=o.createContext(s);function a(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);